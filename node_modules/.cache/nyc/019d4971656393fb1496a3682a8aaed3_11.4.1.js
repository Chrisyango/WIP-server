'use strict';// Use this to use .env File
var cov_iluyrj6b0=function(){var path='E:\\WebDevelopment\\Thinkful\\Projects\\Workinprogress\\server\\server.js',hash='07b44caf7a40635ef3b9275ca4c92207d98b5868',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'E:\\WebDevelopment\\Thinkful\\Projects\\Workinprogress\\server\\server.js',statementMap:{'0':{start:{line:4,column:0},end:{line:4,column:27}},'1':{start:{line:6,column:16},end:{line:6,column:34}},'2':{start:{line:7,column:13},end:{line:7,column:28}},'3':{start:{line:8,column:15},end:{line:8,column:32}},'4':{start:{line:9,column:17},end:{line:9,column:36}},'5':{start:{line:10,column:15},end:{line:10,column:32}},'6':{start:{line:12,column:30},end:{line:12,column:49}},'7':{start:{line:13,column:20},end:{line:13,column:44}},'8':{start:{line:14,column:20},end:{line:14,column:45}},'9':{start:{line:15,column:22},end:{line:15,column:49}},'10':{start:{line:17,column:20},end:{line:17,column:45}},'11':{start:{line:18,column:19},end:{line:18,column:43}},'12':{start:{line:19,column:18},end:{line:19,column:42}},'13':{start:{line:22,column:12},end:{line:22,column:21}},'14':{start:{line:24,column:10},end:{line:24,column:20}},'15':{start:{line:25,column:18},end:{line:25,column:29}},'16':{start:{line:26,column:19},end:{line:26,column:31}},'17':{start:{line:27,column:18},end:{line:27,column:33}},'18':{start:{line:28,column:18},end:{line:28,column:30}},'19':{start:{line:29,column:17},end:{line:29,column:31}},'20':{start:{line:30,column:17},end:{line:30,column:31}},'21':{start:{line:31,column:16},end:{line:36,column:2}},'22':{start:{line:34,column:4},end:{line:34,column:109}},'23':{start:{line:38,column:15},end:{line:38,column:34}},'24':{start:{line:41,column:0},end:{line:41,column:36}},'25':{start:{line:43,column:0},end:{line:47,column:2}},'26':{start:{line:45,column:24},end:{line:45,column:55}},'27':{start:{line:49,column:0},end:{line:49,column:24}},'28':{start:{line:51,column:0},end:{line:55,column:2}},'29':{start:{line:57,column:0},end:{line:62,column:3}},'30':{start:{line:58,column:15},end:{line:58,column:23}},'31':{start:{line:59,column:15},end:{line:59,column:23}},'32':{start:{line:61,column:2},end:{line:61,column:17}},'33':{start:{line:64,column:0},end:{line:64,column:29}},'34':{start:{line:65,column:0},end:{line:65,column:28}},'35':{start:{line:67,column:0},end:{line:67,column:28}},'36':{start:{line:68,column:0},end:{line:68,column:26}},'37':{start:{line:69,column:0},end:{line:71,column:2}},'38':{start:{line:73,column:0},end:{line:73,column:27}},'39':{start:{line:76,column:17},end:{line:83,column:6}},'40':{start:{line:78,column:6},end:{line:78,column:69}},'41':{start:{line:81,column:6},end:{line:81,column:47}},'42':{start:{line:82,column:6},end:{line:82,column:25}},'43':{start:{line:86,column:0},end:{line:89,column:1}},'44':{start:{line:87,column:2},end:{line:87,column:14}},'45':{start:{line:88,column:2},end:{line:88,column:14}},'46':{start:{line:91,column:0},end:{line:91,column:23}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:45,column:10},end:{line:45,column:11}},loc:{start:{line:45,column:24},end:{line:45,column:55}},line:45},'1':{name:'(anonymous_1)',decl:{start:{line:57,column:48},end:{line:57,column:49}},loc:{start:{line:57,column:62},end:{line:62,column:1}},line:57},'2':{name:'runServer',decl:{start:{line:75,column:9},end:{line:75,column:18}},loc:{start:{line:75,column:32},end:{line:84,column:1}},line:75},'3':{name:'(anonymous_3)',decl:{start:{line:77,column:18},end:{line:77,column:19}},loc:{start:{line:77,column:24},end:{line:79,column:5}},line:77},'4':{name:'(anonymous_4)',decl:{start:{line:80,column:17},end:{line:80,column:18}},loc:{start:{line:80,column:24},end:{line:83,column:5}},line:80}},branchMap:{'0':{loc:{start:{line:44,column:9},end:{line:44,column:65}},type:'cond-expr',locations:[{start:{line:44,column:49},end:{line:44,column:57}},{start:{line:44,column:60},end:{line:44,column:65}}],line:44},'1':{loc:{start:{line:75,column:19},end:{line:75,column:30}},type:'default-arg',locations:[{start:{line:75,column:26},end:{line:75,column:30}}],line:75},'2':{loc:{start:{line:86,column:0},end:{line:89,column:1}},type:'if',locations:[{start:{line:86,column:0},end:{line:89,column:1}},{start:{line:86,column:0},end:{line:89,column:1}}],line:86}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0},b:{'0':[0,0],'1':[0],'2':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_iluyrj6b0.s[0]++;require('dotenv').config();const express=(cov_iluyrj6b0.s[1]++,require('express'));const cors=(cov_iluyrj6b0.s[2]++,require('cors'));const morgan=(cov_iluyrj6b0.s[3]++,require('morgan'));const passport=(cov_iluyrj6b0.s[4]++,require('passport'));const multer=(cov_iluyrj6b0.s[5]++,require('multer'));const{PORT,CLIENT_ORIGIN}=(cov_iluyrj6b0.s[6]++,require('./config'));const{dbConnect}=(cov_iluyrj6b0.s[7]++,require('./db-mongoose'));const jwtStrategy=(cov_iluyrj6b0.s[8]++,require('./passport/jwt'));const localStrategy=(cov_iluyrj6b0.s[9]++,require('./passport/local'));const usersRouter=(cov_iluyrj6b0.s[10]++,require('./routes/users'));const authRouter=(cov_iluyrj6b0.s[11]++,require('./routes/auth'));const picRouter=(cov_iluyrj6b0.s[12]++,require('./routes/pics'));// Init app
const app=(cov_iluyrj6b0.s[13]++,express());const d=(cov_iluyrj6b0.s[14]++,new Date());const curr_date=(cov_iluyrj6b0.s[15]++,d.getDate());const curr_month=(cov_iluyrj6b0.s[16]++,d.getMonth());const curr_year=(cov_iluyrj6b0.s[17]++,d.getFullYear());const curr_hour=(cov_iluyrj6b0.s[18]++,d.getHours());const curr_min=(cov_iluyrj6b0.s[19]++,d.getMinutes());const curr_sec=(cov_iluyrj6b0.s[20]++,d.getSeconds());const storage=(cov_iluyrj6b0.s[21]++,multer.diskStorage({destination:'./public/uploads',filename(req,file,cb){cov_iluyrj6b0.s[22]++;cb(null,`${curr_month}${curr_date}${curr_year}${curr_hour}${curr_min}${curr_sec}-${file.originalname}`);}}));const upload=(cov_iluyrj6b0.s[23]++,multer({storage}));// Public Folder
cov_iluyrj6b0.s[24]++;app.use(express.static('./public'));cov_iluyrj6b0.s[25]++;app.use(morgan(process.env.NODE_ENV==='production'?(cov_iluyrj6b0.b[0][0]++,'common'):(cov_iluyrj6b0.b[0][1]++,'dev'),{skip:(req,res)=>{cov_iluyrj6b0.f[0]++;cov_iluyrj6b0.s[26]++;return process.env.NODE_ENV==='test';}}));cov_iluyrj6b0.s[27]++;app.use(express.json());cov_iluyrj6b0.s[28]++;app.use(cors({origin:CLIENT_ORIGIN}));cov_iluyrj6b0.s[29]++;app.post('/api/uploads',upload.single('file'),(req,res)=>{cov_iluyrj6b0.f[1]++;const file=(cov_iluyrj6b0.s[30]++,req.file);// file passed from client
const meta=(cov_iluyrj6b0.s[31]++,req.body);// all other values passed from the client, like name, etc..
cov_iluyrj6b0.s[32]++;res.json(file);});cov_iluyrj6b0.s[33]++;app.use('/api',usersRouter);cov_iluyrj6b0.s[34]++;app.use('/api',authRouter);cov_iluyrj6b0.s[35]++;passport.use(localStrategy);cov_iluyrj6b0.s[36]++;passport.use(jwtStrategy);cov_iluyrj6b0.s[37]++;app.use(passport.authenticate('jwt',{session:false,failWithError:true}));cov_iluyrj6b0.s[38]++;app.use('/api',picRouter);function runServer(port=(cov_iluyrj6b0.b[1][0]++,PORT)){cov_iluyrj6b0.f[2]++;const server=(cov_iluyrj6b0.s[39]++,app.listen(port,()=>{cov_iluyrj6b0.f[3]++;cov_iluyrj6b0.s[40]++;console.info(`App listening on port ${server.address().port}`);}).on('error',err=>{cov_iluyrj6b0.f[4]++;cov_iluyrj6b0.s[41]++;console.error('Express failed to start');cov_iluyrj6b0.s[42]++;console.error(err);}));}cov_iluyrj6b0.s[43]++;if(require.main===module){cov_iluyrj6b0.b[2][0]++;cov_iluyrj6b0.s[44]++;dbConnect();cov_iluyrj6b0.s[45]++;runServer();}else{cov_iluyrj6b0.b[2][1]++;}cov_iluyrj6b0.s[46]++;module.exports={app};